const Discord = require('discord.js');
const { Command } = require('discord.js-commando');
const client = new Discord.Client();
const db = require ('quick.db');
const token = "NTk0OTc3ODQ3NjEzODQ5NjQw.XRkT3g.Z5-SvMfPDMLXQi0wS-u_Eod8i_E"
const queue = new Map(); 
const ytdl = require('ytdl-core');
const ayarlar = require('./ayarlar.json');
const chalk = require('chalk');
const Jimp = require('jimp');
const jinp = require('jimp');
const snekfetch = require('snekfetch');
const eco = require('discord-economy');
const express = require('express');
const app = express();
const http = require('http');
    app.get("/", (request, response) => {
    console.log(` az Ã¶nce pinglenmedi. Sonra ponglanmadÄ±... ya da baÅŸka bir ÅŸeyler olmadÄ±.`);
    response.sendStatus(200);
    });
    app.listen(process.env.PORT);
    setInterval(() => {
    http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
    }, 280000);
const fs = require('fs');
const moment = require('moment');
require('./util/eventLoader')(client);
let linkEngel = JSON.parse(fs.readFileSync("././jsonlar/linkEngelle.json", "utf8"));
let kufurEngel = JSON.parse(fs.readFileSync("./jsonlar/kufurEngelle.json", "utf8"));

var prefix = ayarlar.prefix;
var yazÄ±lar = new Set();

const log = message => {
  console.log(`[${moment().format('YYYY-MM-DD HH:mm:ss')}] ${message}`);
};


client.commands = new Discord.Collection();
client.aliases = new Discord.Collection();
fs.readdir('./komutlar/', (err, files) => {
  if (err) console.error(err);
  log(`${files.length} komut yÃ¼klenecek.`);
  files.forEach(f => {
    let props = require(`./komutlar/${f}`);
    log(`YÃ¼klenen komut: ${props.help.name}.`);
    client.commands.set(props.help.name, props);
    props.conf.aliases.forEach(alias => {
      client.aliases.set(alias, props.help.name);
    });
  });
});

client.reload = command => {
  return new Promise((resolve, reject) => {
    try {
      delete require.cache[require.resolve(`./komutlar/${command}`)];
      let cmd = require(`./komutlar/${command}`);
      client.commands.delete(command);
      client.aliases.forEach((cmd, alias) => {
        if (cmd === command) client.aliases.delete(alias);
      });
      client.commands.set(command, cmd);
      cmd.conf.aliases.forEach(alias => {
        client.aliases.set(alias, cmd.help.name);
      });
      resolve();
    } catch (e){
      reject(e);
    }
  });
};

client.load = command => {
  return new Promise((resolve, reject) => {
    try {
      let cmd = require(`./komutlar/${command}`);
      client.commands.set(command, cmd);
      cmd.conf.aliases.forEach(alias => {
        client.aliases.set(alias, cmd.help.name);
      });
      resolve();
    } catch (e){
      reject(e);
    }
  });
};

client.unload = command => {
  return new Promise((resolve, reject) => {
    try {
      delete require.cache[require.resolve(`./komutlar/${command}`)];
      let cmd = require(`./komutlar/${command}`);
      client.commands.delete(command);
      client.aliases.forEach((cmd, alias) => {
        if (cmd === command) client.aliases.delete(alias);
      });
      resolve();
    } catch (e){
      reject(e);
    }
  });
};

client.on("message", msg => { 
if (!linkEngel[msg.guild.id]) return;
if (linkEngel[msg.guild.id].linkEngel === "kapali") return;
    if (linkEngel[msg.guild.id].linkEngel === "acik") {
    var regex = new RegExp(/(discord.gg|http|.gg|.com|.net|.org|invite|Ä°nstagram|Facebook|watch|Youtube|youtube|facebook|instagram)/)
    if (regex.test(msg.content)== true) {
    if (!msg.member.hasPermission("ADMINISTRATOR")) {
      msg.delete()
       msg.channel.send(`<@${msg.author.id}>`).then(message => message.delete(5000));
        var e = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setAuthor("Link Engeli!")
        .setDescription(`Bu sunucuda linkler **${client.user.username}** tarafÄ±ndan engellenmektedir! Link atmana izin vermeyeceÄŸim!`)
        msg.channel.send(e).then(message => message.delete(5000));
    }
}
    }
});

client.on("message", msg => {
    const kzgn = client.emojis.get("512302904141545509");
    const embedlul = new Discord.RichEmbed()
      .setColor(0x00AE86)
      .setDescription( msg.author + " Reklam Yasak Bunu Bilmiyormusun!")
    
const embedlulz = new Discord.RichEmbed()
    .setTitle("Sunucunda " + msg.author.tag + " reklam yapÄ±yor!")
      .setColor(0x00AE86)
      .setDescription("?uyar <kiÅŸi> komutu ile onu uyarabilir ya da ?kick <kiÅŸi> veya ao!ban <kiÅŸi> komutlarÄ±nÄ± kullanarak onu sunucudan uzaklaÅŸtÄ±rabilirsin!")
    .addField("KullanÄ±cÄ±nÄ±n mesajÄ±:", "**" + msg.content + "**")

if (msg.content.toLowerCase().match(/(discord.gg|http|.gg|.com|.net|.org|invite|Ä°nstagram|Facebook|watch|Youtube|youtube|facebook|instagram)/) && msg.channel.type === "text" && msg.channel.permissionsFor(msg.guild.member(client.user)).has("MANAGE_MESSAGES")) {
    if(msg.member.hasPermission('BAN_MEMBERS')){
    return;
    } else {
    msg.delete(30).then(deletedMsg => {
     deletedMsg.channel.send(embedlul)
     msg.guild.owner.send(embedlulz).catch(e => {
            console.error(e);
          });
        }).catch(e => {
          console.error(e);
        });
      };
      };
    })
;

client.on("message", msg => {
  if (!msg.guild) return;
  if (!kufurEngel[msg.guild.id]) return;
  if (kufurEngel[msg.guild.id].kÃ¼fÃ¼rEngel === 'kapali') return;
    if (kufurEngel[msg.guild.id].kÃ¼fÃ¼rEngel=== 'acik') {
      const kufur = ["mk", "amk", "aq", "orospu", "oruspu", "oÃ§", "sikerim", "yarrak", "piÃ§", "amq", "sik", "amcÄ±k", "Ã§ocu", "sex", "seks", "amÄ±na", "orospu Ã§ocuÄŸu", "sg", "siktir git"];
  if (kufur.some(word => msg.content.toLowerCase().includes(word)) ) {
    if (!msg.member.hasPermission("ADMINISTRATOR")) {
      msg.delete()
       msg.reply("KÃ¼fÃ¼r filtresi, aktif!").then(message => message.delete(3000));
    }
}
    }
});


client.on('guildMemberAdd', member => {
  let guild = member.guild;
  let joinRole = guild.roles.find('name', 'KayÄ±tlÄ± Ãœye');// 'Ãœye' yazÄ±lan yeri otomatik rol vereceÄŸi rolÃ¼ yapabilirsiniz.//Otorol Komudu :)
  member.sendMessage("Sunucuya HoÅŸgeldin KardeÅŸim **Destek Sunucuma KatÄ±lmak Ä°Ã§in** https://discord.gg/V3jgrXD")//Sunucuya Yeni Biri GeldiÄŸinde Mesaj Atar istediÄŸini yaz.
  member.addRole(joinRole);

  const channel = member.guild.channels.find('name', 'gelen-giden');// 'gelen-giden' log ismidir. deÄŸiÅŸtirebilirsiniz. belirttiÄŸiniz isme giriÅŸ Ã§Ä±kÄ±ÅŸ gÃ¶sterecektir.
  if (!channel) return;
  const embed = new Discord.RichEmbed()
  .setColor('0x00cc44')
  .setAuthor(bot.user.username, bot.user.avatarURL)
  .setThumbnail(member.user.avatarURL)
  .setTitle(`:inbox_tray: ${member.user.username} Sunucuya katÄ±ldÄ±.`)
  .setTimestamp()
  channel.sendEmbed(embed);
});

client.on('guildMemberRemove', member => {
  const channel = member.guild.channels.find('name', 'gelen-giden');// 'gelen-giden' log ismidir. deÄŸiÅŸtirebilirsiniz. belirttiÄŸiniz isme giriÅŸ Ã§Ä±kÄ±ÅŸ gÃ¶sterecektir.
  if (!channel) return;
  const embed = new Discord.RichEmbed()
  .setColor('0xff1a1a')
  .setAuthor(bot.user.username, bot.user.avatarURL)
  .setThumbnail(member.user.avatarURL)
  .setTitle(`:outbox_tray: ${member.user.username} Sunucudan ayrÄ±ldÄ±.`)
  .setTimestamp()
channel.sendEmbed(embed);
});

client.on('message', async message => {
  const ms = require('ms');
  const args = message.content.slice(prefix.length).trim().split(/ +/g);
  const command = args.shift().toLowerCase();
  let u = message.mentions.users.first() || message.author;
  if (command === "sunucu-kur") {
  if (message.guild.channels.find(channel => channel.name === "Bot KullanÄ±mÄ±")) return message.channel.send(" Bot Paneli Zaten AyarlanmÄ±ÅŸ.")
  message.channel.send(`Bot Bilgi KanallarÄ±nÄ±n kurulumu baÅŸlatÄ±lsÄ±n mÄ±? baÅŸlatÄ±lacak ise **evet** yazÄ±nÄ±z.`)
      if (!message.member.hasPermission('ADMINISTRATOR'))
  return message.channel.send(" Bu Kodu `YÃ¶netici` Yetkisi Olan KiÅŸi Kullanabilir.");
      message.channel.awaitMessages(response => response.content === 'evet', {
        max: 1,
        time: 10000,
        errors: ['time'],
      })
    .then((collected) => {
   message.guild.createChannel('|â–¬â–¬|Ã–NEMLÄ° KANALLAR|â–¬â–¬|', 'category', [{
  id: message.guild.id,
  deny: ['SEND_MESSAGES']
}])



        
 message.guild.createChannel('ã€ŒðŸ“ƒã€kurallar', 'text', [{
  id: message.guild.id,
  deny: ['SEND_MESSAGES']
}])
.then(channel =>
 channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|Ã–NEMLÄ° KANALLAR|â–¬â–¬|")));
 message.guild.createChannel('ã€ŒðŸšªã€gelen-giden', 'text', [{
  id: message.guild.id,
  deny: ['SEND_MESSAGES']
}])
.then(channel =>
       channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|Ã–NEMLÄ° KANALLAR|â–¬â–¬|")));
       message.guild.createChannel('ã€Œâœ…ã€sayaÃ§', 'text', [{
        id: message.guild.id,
        deny: ['SEND_MESSAGES']
      }])
.then(channel =>
             channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|Ã–NEMLÄ° KANALLAR|â–¬â–¬|")));
             message.guild.createChannel('ã€ŒðŸ’¾ã€log-kanalÄ±', 'text', [{
              id: message.guild.id,
              deny: ['SEND_MESSAGES']
            }])
            .then(channel => channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|Ã–NEMLÄ° KANALLAR|â–¬â–¬|")));
            message.guild.createChannel('ã€ŒðŸ“¢ã€duyuru-odasÄ±', 'text', [{
              id: message.guild.id,
              deny: ['SEND_MESSAGES']
            }])
.then(channel =>
 channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|Ã–NEMLÄ° KANALLAR|â–¬â–¬|")));

       }) 
       .then((collected) => {
        message.guild.createChannel('|â–¬â–¬|GENEL KANALLAR|â–¬â–¬|', 'category', [{
       id: message.guild.id,
     }]);
             
      message.guild.createChannel(`ã€ŒðŸ’¡ã€ÅŸikayet-ve-Ã¶neri`, 'text')
     .then(channel =>
      channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|GENEL KANALLAR|â–¬â–¬|")));
     message.guild.createChannel(`ã€ŒðŸ‘¥ã€pre-arama-odasÄ±`, 'text')
     .then(channel =>
            channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|GENEL KANALLAR|â–¬â–¬|")));
     message.guild.createChannel(`ã€ŒðŸ“·ã€gÃ¶rsel-iÃ§erik`, 'text')
     .then(channel =>
                  channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|GENEL KANALLAR|â–¬â–¬|")));
     message.guild.createChannel(`ã€ŒðŸ¤–ã€bot-komutlarÄ±`, 'text')
     .then(channel =>
                  channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|GENEL KANALLAR|â–¬â–¬|")));
     message.guild.createChannel(`ã€ŒðŸ’¬ã€sohbet`, 'text')
     .then(channel =>
      channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|GENEL KANALLAR|â–¬â–¬|")));

      message.guild.createChannel(`ðŸ†ã€‹Kurucu OdasÄ±`, "voice")
      .then(channel =>
        channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|SES KANALLARI|â–¬â–¬|")))
      .then(c => {
        let role = message.guild.roles.find("name", "@everyone");
        let role2 = message.guild.roles.find("name", "Kurucu");
        
        c.overwritePermissions(role, {
            CONNECT: false,
        });
        c.overwritePermissions(role2, {
            CONNECT: true,
            
        });
    })

    message.guild.createChannel('|â–¬â–¬|SES KANALLARI|â–¬â–¬|', 'category', [{
      id: message.guild.id,
    }]);

    message.guild.createChannel(`ðŸ†ã€‹YÃ¶netici OdasÄ±`, "voice")
    .then(channel =>
      channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|SES KANALLARI|â–¬â–¬|")))
    .then(c => {
      let role = message.guild.roles.find("name", "@everyone");
      let role2 = message.guild.roles.find("name", "Kurucu");
      let role3 = message.guild.roles.find("name", "YÃ¶netici");
      c.overwritePermissions(role, {
          CONNECT: false,
      });
      c.overwritePermissions(role2, {
          CONNECT: true,
      });
      c.overwritePermissions(role3, {
          CONNECT: true,
      });
  })

  message.guild.createChannel(`ðŸ’¬ã€‹Sohbet OdasÄ±`, "voice")
  .then(channel =>
    channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|SES KANALLARI|â–¬â–¬|")))
  .then(c => {
    let role = message.guild.roles.find("name", "@everyone");
    c.overwritePermissions(role, {
        CONNECT: true,
    });
})

message.guild.createChannel('|â–¬â–¬|OYUN ODALARI|â–¬â–¬|', 'category', [{
  id: message.guild.id,
}]);

message.guild.createChannel(`ðŸŽ®ã€‹LOL`, 'voice')
.then(channel =>
 channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|OYUN ODALARI|â–¬â–¬|")))
 message.guild.createChannel(`ðŸŽ®ã€‹ZULA`, 'voice')
 .then(channel =>
  channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|OYUN ODALARI|â–¬â–¬|")))
 message.guild.createChannel(`ðŸŽ®ã€‹COUNTER STRÄ°KE`, 'voice')
.then(channel =>
 channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|OYUN ODALARI|â–¬â–¬|")))
 message.guild.createChannel(`ðŸŽ®ã€‹PUBG`, 'voice')
 .then(channel =>
  channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|OYUN ODALARI|â–¬â–¬|")))
  message.guild.createChannel(`ðŸŽ®ã€‹FORTNÄ°TE`, 'voice')
  .then(channel =>
   channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|OYUN ODALARI|â–¬â–¬|")))
   message.guild.createChannel(`ðŸŽ®ã€‹MÄ°NECRAFT`, 'voice')
   .then(channel =>
    channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|OYUN ODALARI|â–¬â–¬|")))
    message.guild.createChannel(`ðŸŽ®ã€‹ROBLOX`, 'voice')
    .then(channel =>
     channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|OYUN ODALARI|â–¬â–¬|")))
     message.guild.createChannel(`ðŸŽ®ã€‹WOLFTEAM`, 'voice')
     .then(channel =>
      channel.setParent(message.guild.channels.find(channel => channel.name === "|â–¬â–¬|OYUN ODALARI|â–¬â–¬|")))



      message.guild.createRole({
        name: 'Kurucu',
        color: 'RED',
        permissions: [
            "ADMINISTRATOR",
    ]
      })

      
      message.guild.createRole({
        name: 'YÃ¶netici',
        color: 'BLUE',
        permissions: [
            "MANAGE_GUILD",
            "MANAGE_ROLES",
            "MUTE_MEMBERS",
            "DEAFEN_MEMBERS",
            "MANAGE_MESSAGES",
            "MANAGE_NICKNAMES",
            "KICK_MEMBERS"
    ]
      })

      message.guild.createRole({
        name: 'ModeratÃ¶r',
        color: 'GREEN',
        permissions: [
            "MANAGE_GUILD",
            "MANAGE_ROLES",
            "MUTE_MEMBERS",
            "DEAFEN_MEMBERS",
            "MANAGE_MESSAGES",
            "MANAGE_NICKNAMES"
    ]
      })

      message.guild.createRole({
        name: 'V.I.P',
        color: '00ffff',
      })

      message.guild.createRole({
        name: 'Ãœye',
        color: 'WHITE',
      })

      message.guild.createRole({
        name: 'Bot',
        color: 'ORANGE',
      })

       message.channel.send("Gerekli Odalar Kuruldu!")
     
            })   
    
}
});




    client.on('message', async msg => {
  if (msg.content.toLowerCase() === 'sa') {
    await msg.react('ðŸ‡¦');
    msg.react('ðŸ‡¸');
  }
});


    client.on('message', async msg => {
  if (msg.content.toLowerCase() === 'Selamun AleykÃ¼m') {
    await msg.react('ðŸ‡¦');
    msg.react('ðŸ‡¸');
  }
});

var f = [];
function factorial (n) {
  if (n == 0 || n == 1)
    return 1;
  if (f[n] > 0)
    return f[n];
  return f[n] = factorial(n-1) * n;
};
function clean(text) {
  if (typeof(text) === "string")
    return text.replace(/`/g, "`" + String.fromCharCode(8203)).replace(/@/g, "@" + String.fromCharCode(8203));
  else
      return text;
}


////////////////////////

client.elevation = message => {
  if(!message.guild) {
    return; }
  let permlvl = 0;
  if (message.member.hasPermission("BAN_MEMBERS")) permlvl = 2;
  if (message.member.hasPermission("ADMINISTRATOR")) permlvl = 3;
  if (message.author.id === ayarlar.sahip) permlvl = 4;
  if (message.author.id === ayarlar.sahip) permlvl = 4;
  return permlvl;
};

var regToken = /[\w\d]{24}\.[\w\d]{6}\.[\w\d-_]{27}/g;

client.on('warn', e => {
  console.log(chalk.bgYellow(e.replace(regToken, 'that was redacted')));
});

client.on('error', e => {
  console.log(chalk.bgRed(e.replace(regToken, 'that was redacted')));
});

client.on('message', msg => {
  if (msg.content.toLowerCase() === prefix + 'kullanÄ±cÄ±bilgim')
    if (msg.channel.type !== "group") {
        var Durum = msg.author.presence.status;
        var Durm = (Durum == "online" ? (0x00AE86) : (Durum == "offline" ? (0x808080) : (Durum == "idle" ? (0xFFFF00) : (Durum == "dnd" ? (0xFF0000) : (0x00AE86)))))
        var durm = (Durum == "online" ? ("Ã‡evrimiÃ§i") : (Durum == "offline" ? ("Ã‡evrimdÄ±ÅŸÄ±") : (Durum == "idle" ? ("BoÅŸta") : (Durum == "dnd" ? ("RahatsÄ±z Etmeyin") : ("Bilinmiyor/bulunamadÄ±.")))))
      const kullanicibilgimk = new Discord.RichEmbed()
      .setAuthor(msg.author.username, msg.author.avatarURL)
      .setColor(Durm)
      .setTimestamp()
      .addField('Ad:', msg.author.username + '#' + msg.author.discriminator)
      .addField('ID:', msg.author.id)
      .addField('KayÄ±t tarihi:', msg.author.createdAt)
      .addField('Durum:', durm)
      .addField('Åžu an oynadÄ±ÄŸÄ± oyun:', msg.author.presence.game ? msg.author.presence.game.name : 'Åžu an oyun oynamÄ±yor')
      .addField('BOT mu?', msg.author.bot ? '\n Evet' : 'HayÄ±r')
      console.log("!kullanÄ±cÄ±bilgim komutu " + msg.author.username + " tarafÄ±ndan kullanÄ±ldÄ±.")
      return msg.channel.sendEmbed(kullanicibilgimk);
  }
});


client.on('guildBanAdd', async (guild, member) => {
    const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
  
  const hgK = member.guild.channels.get(gc[member.guild.id].gkanal)
    if (!hgK) return;
   const embed = new Discord.RichEmbed()
			.setTitle('Ãœye yasaklandÄ±.')
			.setAuthor(member.user.tag, member.user.avatarURL)
			.setColor('RANDOM')
			.setDescription(`<@!${member.user.id}>, ${member.user.tag}`)
			.setThumbnail(member.user.avatarURL)
			.setFooter(`Live Security TR Mod-Log Sistemi | ID: ${member.user.id}`)
			.setTimestamp();
			hgK.send({embed});

		
	})
	
	.on('guildBanRemove', async (guild, member) => {
		    const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
  
  const hgK = member.guild.channels.get(gc[member.guild.id].gkanal)
    if (!hgK) return;
			var embed = new Discord.RichEmbed()
			.setTitle('Ãœyenin yasaklamasÄ± kaldÄ±rÄ±ldÄ±.')
			.setAuthor(member.user.tag, member.user.avatarURL)
			.setColor('RANDOM')
			.setDescription(`<@!${member.user.id}>, ${member.user.tag}`)
			.setThumbnail(member.user.avatarURL)
			.setFooter(`Live Security TR Mod-Log Sistemi | ID: ${member.user.id}`)
			.setTimestamp();
			hgK.send({embed});
		
	})


	.on('messageDelete', async msg => {
		if (!msg.guild) return;
    const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
  
  const hgK = msg.guild.channels.get(gc[msg.guild.id].gkanal)
    if (!hgK) return;
			var embed = new Discord.RichEmbed()
			.setAuthor(msg.author.tag, msg.author.avatarURL)
			.setColor('RANDOM')
			.setDescription(`<@!${msg.author.id}> tarafÄ±ndan <#${msg.channel.id}> kanalÄ±na gÃ¶nderilen "${msg.content}" mesajÄ± silindi.`)
		.setFooter(`Live Security TR Mod-Log Sistemi | ID: ${msg.id}`)
			hgK.send({embed});
		
	})

	.on('channelCreate', async channel => {
		if (!channel.guild) return;
    const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
  
  const hgK = channel.guild.channels.get(gc[channel.guild.id].gkanal)
    if (!hgK) return;		
			if (channel.type === "text") {
				var embed = new Discord.RichEmbed()
				.setColor('RANDOM')
				.setAuthor(channel.guild.name, channel.guild.iconURL)
				.setDescription(`<#${channel.id}> kanalÄ± oluÅŸturuldu. _(metin kanalÄ±)_`)
				.setFooter(`Live Security TR Mod-Log Sistemi | ID: ${channel.id}`)
				hgK.send({embed});
			};
			if (channel.type === "voice") {
				var embed = new Discord.RichEmbed()
					.setColor('RANDOM')
				.setAuthor(channel.guild.name, channel.guild.iconURL)
				.setDescription(`${channel.name} kanalÄ± oluÅŸturuldu. _(sesli kanal)_`)
			.setFooter(`Live Security TR Mod-Log Sistemi | ID: ${channel.id}`)
				hgK.send({embed});
			}
		
	})
		
	.on('channelDelete', async channel => {
		    const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
  
  const hgK = channel.guild.channels.get(gc[channel.guild.id].gkanal)
    if (!hgK) return;
			if (channel.type === "text") {
				let embed = new Discord.RichEmbed()
					.setColor('RANDOM')
				.setAuthor(channel.guild.name, channel.guild.iconURL)
				.setDescription(`${channel.name} kanalÄ± silindi. _(metin kanalÄ±)_`)
				.setFooter(`Live Security TR Mod-Log Sistemi | ID: ${channel.id}`)
				hgK.send({embed});
			};
			if (channel.type === "voice") {
				let embed = new Discord.RichEmbed()
				.setColor('RANDOM')
				.setAuthor(channel.guild.name, channel.guild.iconURL)
				.setDescription(`${channel.name} kanalÄ± silindi. _(sesli kanal)_`)
			.setFooter(`Live Security TR Mod-Log Sistemi | ID: ${channel.id}`)
				hgK.send({embed});
			}
		
	})

.on('roleDelete', async role => {
  const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
  
  const hgK = role.guild.channels.get(gc[role.guild.id].gkanal)
    if (!hgK) return;
  let embed = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setAuthor(`Rol Silindi!`)
        .setThumbnail(role.guild.iconURL)
        .setDescription(`'${role.name}' adlÄ± rol silindi.`, true)
  .setFooter(`Live Security TR Mod-Log Sistemi | ID: ${role.id}`)
    hgK.send({embed})
})

.on('emojiCreate', async emoji => {
  const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
  
  const hgK = emoji.guild.channels.get(gc[emoji.guild.id].gkanal)
    if (!hgK) return;
  let embedds9 = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setAuthor(`Emoji OluÅŸturuldu!`)
        .setThumbnail(emoji.guild.iconURL)
        .setDescription(`<:${emoji.name}:${emoji.id}> - ${emoji.name} adlÄ± emoji oluÅŸturuldu!`, true)
  .setFooter(`Live Security TR Mod-Log Sistemi | ID: ${emoji.id}`)
    hgK.send({embedds9})
})

.on('emojiDelete', async emoji => {
  const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
  
  const hgK = emoji.guild.channels.get(gc[emoji.guild.id].gkanal)
    if (!hgK) return;
  let embedds0 = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setAuthor(`Emoji Silindi!`)
        .setThumbnail(emoji.guild.iconURL)
        .setDescription(`':${emoji.name}:' adlÄ± emoji silindi!`, true)
  	.setFooter(`Live Security TR Mod-Log Sistemi | ID: ${emoji.id}`)
   hgK.send(embedds0)
})

.on('roleCreate', async role => {
  const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
  
  const hgK = role.guild.channels.get(gc[role.guild.id].gkanal)
    if (!hgK) return;
  let embedds0 = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setAuthor(`Rol OluÅŸturuldu!`)
        .setThumbnail(role.guild.iconURL)
        .setDescription(`'${role.name}' adlÄ± rol oluÅŸturuldu.`, true)
  .setFooter(`Live Security TR Mod-Log Sistemi | ID: ${role.id}`)
   hgK.send(embedds0)
})

.on('messageUpdate', async (oldMessage, newMessage) => {
   const fs = require('fs');
let gc = JSON.parse(fs.readFileSync("./sunucuyaÃ¶zelayarlar/log.json", "utf8"));
   const hgK = oldMessage.guild.channels.get(gc[oldMessage.guild.id].gkanal)
    if (!hgK) return;
      if (oldMessage.author.bot) {
        return false;
    }

    if (!oldMessage.guild) {
        return false;
    }

    if (oldMessage.content == newMessage.content) {
        return false;
    }

    if (!oldMessage || !oldMessage.id || !oldMessage.content || !oldMessage.guild) return;
  let embedds4 = new Discord.RichEmbed()
        .setColor("RANDOM")
        .setAuthor(`Mesaj GÃ¼ncellendi!`)
        .setThumbnail(oldMessage.author.avatarURL)
        .addField("GÃ¶nderen", oldMessage.author.tag, true)
        .addField("Ã–nceki Mesaj", oldMessage.content, true)
        .addField("Åžimdiki Mesaj", newMessage.content, true)
        .addField("Kanal", newMessage.channel.name, true)
  	.setFooter(`Live Security TR Mod-Log Sistemi | ID: ${oldMessage.id}`)
    hgK.send(embedds4)
})


  client.on(`guildMemberAdd`, async member => {
  const e = new Discord.RichEmbed()
    .setColor(`RANDOM`)
    .setImage(`https://media.giphy.com/media/l4JyOCNEfXvVYEqB2/giphy.gif`)
    .addField(`***Sunucumuza GeldiÄŸin Ä°Ã§in TeÅŸekkÃ¼rler.!***`, `Live Security Ä°yi EÄŸlenceler diler`)
    .addField(`Davet Linkleri;`, `[Botu Sunucuna Eklemek iÃ§in TÄ±kla](https://discordapp.com/oauth2/authorize?client_id=594977847613849640&scope=bot&permissions=2146958847)\n[Botun Destek Sunucusu](https://discord.gg/aRmB6CW)`)
    .setFooter(`Bu Sunucu 7/24 Live Security TR tarafÄ±ndan korunuyor.`)
  member.send(e);
});


const settings = {
  prefix: '/',
  token: 'NTk0OTc3ODQ3NjEzODQ5NjQw.XRkT3g.Z5-SvMfPDMLXQi0wS-u_Eod8i_E',
  admin:["398903117451755523"]
}

 

client.on('message', async message => {
 
  
  var command = message.content.toLowerCase().slice(settings.prefix.length).split(' ')[0];
 
  
  var args = message.content.split(' ').slice(1);
 
  
  
  if (!message.content.startsWith(settings.prefix) || message.author.bot) return;
 
  if (command === 'cÃ¼zdan') {
 
    var output = await eco.FetchBalance(message.author.id)
    message.channel.send(`Hey ${message.author.tag}! CÃ¼zdanÄ±nda ${output.balance}TL var.`);
  }
 
  if (command === 'gÃ¼nlÃ¼kpara') {
 
    var output = await eco.Daily(message.author.id)
    //output.updated bize Ã¼yenin gÃ¼nlÃ¼k parasÄ±nÄ± alÄ±p almadÄ±ÄŸÄ±nÄ± sÃ¶yler
 
    if (output.updated) {
 
      var profile = await eco.AddToBalance(message.author.id, 100)
      message.reply(`Ä°ÅŸte GÃ¼nlÃ¼k 100TL ArtÄ±k ${profile.newbalance}TL ya sahipsin!`);
 
    } else {
      message.channel.send(`ÃœzgÃ¼nÃ¼m, zaten gÃ¼nlÃ¼k paranÄ± aldÄ±n!\n Ama Ã¼zÃ¼lme, ${output.timetowait} sonra tekrar alabilirsin!`)
    }
 
  }

  
  if (command === 'liderliktablosu') {

 
    //EÄŸer birini etiketlerseniz kullanÄ±cÄ±nÄ±n sÄ±ralamda kaÃ§Ä±ncÄ± olduÄŸunu gÃ¶sterir
    if (message.mentions.users.first()) {
 
      var output = await eco.Leaderboard({
        filter: x => x.balance > 50,
        search: message.mentions.users.first().id
      })
      message.channel.send(`${message.mentions.users.first().tag}, liderlik tablosunda ${output} sÄ±rada!`);   
 
    } else {
 
      eco.Leaderboard({
        limit: 3, 
        filter: x => x.balance > 50 
      }).then(async users => { 
 
        if (users[0]) var firstplace = await client.fetchUser(users[0].userid) 
        if (users[1]) var secondplace = await client.fetchUser(users[1].userid) 
        if (users[2]) var thirdplace = await client.fetchUser(users[2].userid) 
 
        message.channel.send(`Liderlik Tablosu:
 
1 - ${firstplace && firstplace.tag || 'KiÅŸi Yok'} : ${users[0] && users[0].balance || 'Para yok'}
2 - ${secondplace && secondplace.tag || 'KiÅŸi Yok'} : ${users[1] && users[1].balance || 'Para yok'}
3 - ${thirdplace && thirdplace.tag || 'KiÅŸi Yok'} : ${users[2] && users[2].balance || 'Para yok'}`)
 
      })
 
    }
  }
 
    if (command === 'transfer') {
 
    var user = message.mentions.users.first()
    var amount = args[1]
 
    if (!user) return message.reply('Para gÃ¶ndermek istediÄŸiniz kullanÄ±cÄ±yÄ± etiketleyin!')
    if (!amount) return message.reply('Ã–demek istediÄŸiniz tutarÄ± belirtin!')
 
    var output = await eco.FetchBalance(message.author.id)
    if (output.balance < amount) return message.reply('Transfer etmek istediÄŸiniz miktardan daha az para var!')
 
    var transfer = await eco.Transfer(message.author.id, user.id, amount)
    message.reply(`Para transferleri baÅŸarÄ±yla yapÄ±ldÄ±!\n GÃ¶nderen KiÅŸi:${message.author.tag} \n GÃ¶nderen KiÅŸinin Yeni Bakiye Durumu ${transfer.FromUser}\n Gonderilen KiÅŸi: ${user.tag} \n Para GÃ¶nderilen KiÅŸinin Yeni Bakiye Durumu: ${transfer.ToUser}`);
    }
  
  if (command === 'kumar') {
 
    var roll = args[0] 
    var amount = args[1] 
 
    if (!roll || ![1, 2, 3, 4, 5, 6].includes(parseInt(roll))) return message.reply('LÃ¼tfen 1-6 arasÄ± bir sayÄ± belirtin! DoÄŸru kullanÄ±m: **-zar <1-6> <para miktarÄ±>**')
    if (!amount) return message.reply('LÃ¼tfen oynayacaÄŸÄ±nÄ±z miktarÄ± belirtin! DoÄŸru kullanÄ±m: **&zar <1-6> <para miktarÄ±>**')
 
    var output = eco.FetchBalance(message.author.id)
    if (output.balance < amount) return message.reply('BelirttiÄŸiniz miktardan daha az paran var. Maalesef Kumar OynayamazsÄ±nÄ±z!')
 
    var gamble = await eco.Dice(message.author.id, roll, amount).catch(console.error)

    
    if (gamble.output === "lost") {
    message.reply(`Zar ${gamble.dice} atÄ±ldÄ±. Yani kaybettin! ArtÄ±k cÃ¼zdanÄ±nda ${gamble.newbalance}TL var`)
    } else if (gamble.output === "won"){
    message.reply(`Zar ${gamble.dice} atÄ±ldÄ±. Yani kazandÄ±n! ArtÄ±k cÃ¼zdanÄ±nda ${gamble.newbalance}TL var`)
    }
    
   
 
  }
 

 

 
});



let points = JSON.parse(fs.readFileSync('./xp.json', 'utf8'));

var f = [];
function factorial (n) {
  if (n == 0 || n == 1)
    return 1;
  if (f[n] > 0)
    return f[n];
  return f[n] = factorial(n-1) * n;
};
function clean(text) {
  if (typeof(text) === "string")
    return text.replace(/`/g, "`" + String.fromCharCode(8203)).replace(/@/g, "@" + String.fromCharCode(8203));
  else
      return text;
}

client.on("message", async message => {
    if (message.channel.type === "dm") return;

  if (message.author.bot) return;

  var user = message.mentions.users.first() || message.author;
  if (!message.guild) user = message.author;

  if (!points[user.id]) points[user.id] = {
    points: 0,
    level: 0,
  };

  let userData = points[user.id];
  userData.points++;

  let curLevel = Math.floor(0.1 * Math.sqrt(userData.points));
  if (curLevel > userData.level) {
    userData.level = curLevel;
        var user = message.mentions.users.first() || message.author;
    }

fs.writeFile('./xp.json', JSON.stringify(points), (err) => {
    if (err) console.error(err)
  })

  if (message.content.toLowerCase() === prefix + 'level' || message.content.toLowerCase() === prefix + 'profil') {
        var output = await eco.FetchBalance(message.author.id)

const level = new Discord.RichEmbed().setTitle(`${user.username}`).setDescription(`**Seviye:** ${userData.level}\n**EXP:**${userData.points}\n**ParasÄ±:**${output.balance}`).setColor("RANDOM").setFooter(`Live Security Bot | Level Sistemi`).setThumbnail(user.avatarURL)
message.channel.send(`ðŸ“ **| ${user.username} AdlÄ± KullanÄ±cÄ±nÄ±n Profili Burada!**`)
message.channel.send(level)
  }
});
   
client.on('guildDelete', guild => {

let rrrsembed = new Discord.RichEmbed()

.setColor("RED")
.setTitle(" Bot Kickledi ")
.addField("Sunucu AdÄ±:", guild.name)
.addField("Sunucu sahibi", guild.owner)
.addField("Sunucu Sahibi'nin ID'si", guild.ownerID)
.addField("Sunucunun Kurulu OlduÄŸu BÃ¶lge:", guild.region)
.addField("Sunucudaki KiÅŸi SayÄ±sÄ±:", guild.memberCount)

   client.channels.get('590602853899567146').send(rrrsembed);
  
});


client.on('guildCreate', guild => {

let rrrsembed = new Discord.RichEmbed()

.setColor("GREEN")
.setTitle(" Bot Eklendi ")
.addField("Sunucu AdÄ±:", guild.name)
.addField("Sunucu sahibi", guild.owner)
.addField("Sunucu Sahibi'nin ID'si", guild.ownerID)
.addField("Sunucunun Kurulu OlduÄŸu BÃ¶lge:", guild.region)
.addField("Sunucudaki KiÅŸi SayÄ±sÄ±:", guild.memberCount)

   client.channels.get('590602853899567146').send(rrrsembed);
  
});

//SUNUCUYA Ã–ZEL EMOJÄ°LÄ° KAYIT

const yourID = "398903117451755523"; //Instructions on how to get this: https://redd.it/40zgse //Kendi Ä°D'nizi YazÄ±n
const setupCMD = "/kayÄ±tol" //Ä°stediÄŸiniz Komut Yapabilirsiniz Ã¶rn : !kayÄ±tol
let initialMessage = `KayÄ±t Olmak Ä°Ã§in AÅŸaÄŸÄ±daki Emojiye TÄ±klaynÄ±z.`; //DilediÄŸiniz Åžeyi Yazabilirsiniz
const roles = ["KayÄ±tlÄ± Ãœye"]; //Ä°stediÄŸiniz RolÃ¼ Yazabilirsiniz
const reactions = ["ðŸŽ‰"]; //Ä°stediÄŸiniz Emojiyi Ekleyebilirsiniz
const botToken = "NTk0OTc3ODQ3NjEzODQ5NjQw.XRkT3g.Z5-SvMfPDMLXQi0wS-u_Eod8i_E";  //Buraya botunuzun tokenini koyunuz
                     
//Load up the bot...
const discord = require('discord.js');
const bot = new Discord.Client();
bot.login(botToken);
//If there isn't a reaction for every role, scold the user!
if (roles.length !== reactions.length) throw "Roles list and reactions list are not the same length!";
//Function to generate the role messages, based on your settings
function generateMessages(){
    var messages = [];
    messages.push(initialMessage);
    for (let role of roles) messages.push(`KayÄ±t Olmak Ä°Ã§in AÅŸaÄŸÄ±daki Emojiye TÄ±klaynÄ±z.`); //DONT CHANGE THIS
    return messages;
}
bot.on("message", message => {
    if (message.author.id == yourID && message.content.toLowerCase() == setupCMD){
        var toSend = generateMessages();
        let mappedArray = [[toSend[0], false], ...toSend.slice(1).map( (message, idx) => [message, reactions[idx]])];
        for (let mapObj of mappedArray){
            message.channel.send(mapObj[0]).then( sent => {
                if (mapObj[1]){
                  sent.react(mapObj[1]);  
                } 
            });
        }
    }
})
bot.on('raw', event => {
    if (event.t === 'MESSAGE_REACTION_ADD' || event.t == "MESSAGE_REACTION_REMOVE"){
        
        let channel = bot.channels.get(event.d.channel_id);
        let message = channel.fetchMessage(event.d.message_id).then(msg=> {
        let user = msg.guild.members.get(event.d.user_id);
        
        if (msg.author.id == bot.user.id && msg.content != initialMessage){
       
            var re = `\\*\\*"(.+)?(?="\\*\\*)`;
            var role = msg.content.match(re)[1];
        
            if (user.id != bot.user.id){
                var roleObj = msg.guild.roles.find(r => r.name === role);
                var memberObj = msg.guild.members.get(user.id);
                
                if (event.t === "MESSAGE_REACTION_ADD"){
                    memberObj.addRole(roleObj)
                } else {
                    memberObj.removeRole(roleObj);
                }
            }
        }
        })
 
    }   
});























































//EKSTRA KODLAR BU TARAFLARA EKLENECEK!









client.login(ayarlar.token);